@model Wing_Fleet_Manager.ViewModel.ZonesViewModel

@* Page Layout *@
<div class="container-fluid">
    <div class="row mt-3 d-flex justify-content-between align-items-center g-3">
        @* Page Header *@
        <div class="col-12 col-lg-4">
            <h2>
                <i class="fa-solid fa-map-location-dot my-3" style="margin-right:10px"></i>
                Zones Management</h2>
        </div>
        <div class="col-12 col-lg-1 mt-2 text-end">
            <button class="btn btn-primary" style="background-color:#0097A7; border-color:#0097A7" data-bs-toggle="modal" data-bs-target="#createZone"><i class="fa-solid fa-plus"></i></button>
        </div>
    </div>

    @*Zones Table*@
    <div class="row">
        @{
            int index = 1;
        }
        <table class="table table-striped table-hover align-middle my-3 text-center">
            <thead>
                <tr>
                    <th>#</th>
                    <th>Name</th>
                    <th>City</th>
                    <th>Spare Batteries</th>
                    <th>Vehicles Count</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                @foreach(var zone in Model.Zones)
                {
                    <tr>
                        <td>@index</td>
                        <td>@zone.Name</td>
                        <td>@zone.City</td>
                        <td>@zone.SpareBatteries</td>
                        <td>@zone.VehiclesCount</td>
                        <td>
                            <button class="btn btn-warning btn-sm" data-bs-toggle="modal" data-bs-target="#readzone_@zone.Id">
                                <i class="fa-solid fa-eye"></i>
                            </button>
                            <button class="btn btn-sm btn-secondary" data-bs-toggle="modal" data-bs-target="#updatezone_@zone.Id">
                                <i class="fa-solid fa-pen"></i>
                            </button>
                            <button class="btn btn-sm btn-danger" data-bs-toggle="modal" data-bs-target="#deletezone_@zone.Id">
                                <i class="fa-solid fa-trash"></i>
                            </button>
                        </td>
                    </tr>
                    index++;
                }
            </tbody>
        </table>
    </div>

    @*Read Zone Modal*@
    @foreach (var zone in Model.Zones)
    {
        <div class="modal fade" id="readzone_@zone.Id">
            <div class="modal-dialog modal-dialog-centered">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4>Read Zone Info</h4>
                        <button class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <div class="container-fluid">
                            <div class="row justify-content-center align-content-center my-3">
                                <div class="col-12 col-lg-12">
                                    <div class="card p-3">
                                        <h4>Zone Name : @zone.Name</h4>
                                        <h5>City : @zone.City</h5>
                                        <h5>Spare Batteries : @zone.SpareBatteries</h5>
                                        <h5>Vehicles : @zone.VehiclesCount</h5>
                                        <h5>Created At : @zone.CreatedAt</h5>
                                        <h5>Last Updated At : @zone.LastUpdatedAt</h5>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer"></div>
                </div>
            </div>
        </div>
    }


    @*Create Zone Modal*@
    <div class="modal fade" id="createZone">
        <div class="modal-dialog modal-lg  modal-dialog-scrollable">
            <div class="modal-content">
                <div class="modal-header">
                    <h4>Create New Zone</h4>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form asp-action="Create" asp-controller="Zones" method="post" id="createZoneform">
                        @Html.AntiForgeryToken()
                        <div class="p-3">
                            <input type="text" asp-for="zoneCreateDto.Name" class="form-control" placeholder="Zone Name" />
                            <span asp-validation-for="zoneCreateDto.Name" class="text-danger"></span>
                        </div>
                        <div class="p-3">
                            <input type="text" asp-for="zoneCreateDto.City" class="form-control" placeholder="City" />
                            <span asp-validation-for="zoneCreateDto.City" class="text-danger"></span>
                        </div>
                        <div class="p-3">
                            <input type="number" asp-for="zoneCreateDto.SpareBatteries" class="form-control" placeholder="Spare Batteries Count" />
                            <span asp-validation-for="zoneCreateDto.SpareBatteries" class="text-danger"></span>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" type="submit" form="createZoneform">Create</button>
                    <button class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    @*Update Zone Modal*@
    @foreach (var zone in Model.Zones)
    {
        <div class="modal fade" id="updatezone_@zone.Id">
            <div class="modal-dialog modal-xl modal-dialog-scrollable">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4>Update Zone</h4>
                        <button class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <form asp-action="Update" asp-controller="Zones" id="updateForm_@zone.Id">
                            @Html.AntiForgeryToken()
                            <input type="hidden" name="Id" value="@zone.Id" />
                            <div class="px-3">
                                <label>Name</label>
                                <input class="form-control" name="Name" value="@zone.Name" type="text" />
                            </div>
                            <div class="px-3 pt-2">
                                <label>City</label>
                                <input class="form-control" name="City" value="@zone.City" type="text" />
                            </div>
                            <div class="px-3 pt-2">
                                <label>Spare Batteries</label>
                                <input class="form-control mt-1" name="SpareBatteries" value="@zone.SpareBatteries" type="number" />
                            </div>
                            

                            <div class="modal-footer">
                                <button class="btn btn-primary btn-sm" type="submit">Update</button>
                                <button class="btn btn-secondary btn-sm" data-bs-dismiss="modal">Close</button>
                            </div>
                        </form>
                    </div>

                </div>
            </div>
        </div>
    }


    @*Delete Zone Modal*@
    @foreach (var zone in Model.Zones)
    {
        <div class="modal fade" id="deletezone_@zone.Id">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4>Delete Zone</h4>
                        <button class="btn-close" data-bs-dismiss="modal"></button>
                    </div>
                    <div class="modal-body">
                        <p>
                            Do you want to remove this Zone ?
                        </p>
                    </div>
                    <div class="modal-footer">
                        <form asp-action="Delete" asp-controller="Zones" method="post">
                            @Html.AntiForgeryToken()
                            <input type="hidden" name="id" value="@zone.Id" />
                            <button class="btn btn-danger" type="submit">Delete</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    }


    @*Pagination*@
    <div class="row mt-2 d-flex justify-content-end fixed-bottom">
        <div class="col-lg-2">
            @Html.PagedListPager(
            Model.Zones,
                        page => Url.Action("Index", new { page = page }),
                        new PagedListRenderOptions
                        {
                            LiElementClasses = new[] { "page-item" },
                            PageClasses = new[] { "page-link" },
                        }
                        )
        </div>
    </div>
</div>